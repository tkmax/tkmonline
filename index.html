<!DOCTYPE html>
<html lang="ja">

<head>
<meta charset="utf-8" />
<title>Tkm&nbsp;Online</title>
<link rel="stylesheet" href="./css/html5reset-1.6.1.css" />
<link rel="stylesheet" href="./css/index.css" />
</head>

<body>
<div id="header">
    <div id="title">TkmOnline</div>
    <a href="http://www57.atwiki.jp/tkmonline/" target="_blank"><div id="wiki">WIKI</div></a>
    <a href="http://jbbs.livedoor.jp/netgame/12693/" target="_blank"><div id="bbs">BBS</div></a>
</div>

<div id="wrapper">
    <div id="catch-copy"></div>

    <div id="eye-catch"></div>
    
    <table id="room-table">
        <tr>
            <td><div class="group-name">野良卓</div></td>
        </tr>
        <tr>
            <td id="room0" class="room">
                <a href="cataso/I.html" target="_blank">
                    <div class="room-title">カタソI</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room1" class="room">
                <a href="cataso/II.html" target="_blank">
                    <div class="room-title">カタソII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room2" class="room">
                <a href="cataso/III.html" target="_blank">
                    <div class="room-title">カタソIII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room3" class="room">
                <a href="battleraiso/I.html" target="_blank">
                    <div class="room-title">バトルライソI</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room4" class="room">
                <a href="goipai/I.html" target="_blank">
                    <div class="room-title">ごい牌I</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
        </tr>
        <tr>
            <td><div class="group-name">身内卓</div></td>
        </tr>
        <tr>
            <td id="room5" class="room">
                <a href="cataso/IV.html" target="_blank">
                    <div class="room-title">カタソIV</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room6" class="room">
                <a href="cataso/V.html" target="_blank">
                    <div class="room-title">カタソV</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room7" class="room">
                <a href="cataso/VI.html" target="_blank">
                    <div class="room-title">カタソVI</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room8" class="room">
                <a href="cataso/VII.html" target="_blank">
                    <div class="room-title">カタソVII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room9" class="room">
                <a href="cataso/VIII.html" target="_blank">
                    <div class="room-title">カタソVIII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
        </tr>
        <tr>
            <td id="room10" class="room">
                <a href="cataso/IX.html" target="_blank">
                    <div class="room-title">カタソIX</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room11" class="room">
                <a href="cataso/X.html" target="_blank">
                    <div class="room-title">カタソX</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room12" class="room">
                <a href="cataso/XI.html" target="_blank">
                    <div class="room-title">カタソXI</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room13" class="room">
                <a href="cataso/XII.html" target="_blank">
                    <div class="room-title">カタソXII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room14" class="room">
                <a href="cataso/XIII.html" target="_blank">
                    <div class="room-title">カタソXIII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
        </tr>
        <tr>
            <td id="room15" class="room">
                <a href="cataso/XIV.html" target="_blank">
                    <div class="room-title">カタソXIV</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room16" class="room">
                <a href="cataso/XV.html" target="_blank">
                    <div class="room-title">カタソXV</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room17" class="room">
                <a href="cataso/XVI.html" target="_blank">
                    <div class="room-title">カタソXVI</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room18" class="room">
                <a href="cataso/XVII.html" target="_blank">
                    <div class="room-title">カタソXVII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room19" class="room">
                <a href="cataso/XVIII.html" target="_blank">
                    <div class="room-title">カタソXVIII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
        <tr>
            <td id="room20" class="room">
                <a href="battleraiso/II.html" target="_blank">
                    <div class="room-title">バトルライソII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room21" class="room">
                <a href="battleraiso/III.html" target="_blank">
                    <div class="room-title">バトルライソIII</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room22" class="room">
                <a href="battleraiso/IV.html" target="_blank">
                    <div class="room-title">バトルライソIV</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room23" class="room">
                <a href="goipai/II.html" target="_blank">
                    <div class="room-title">ごい牌II</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
            <td id="room24" class="room">
                <a href="goipai/III.html" target="_blank">
                    <div class="room-title">ごい牌III</div>
                    <div class="room-number"></div>
                    <div class="cataso-ready"></div>
                </a>
            </td>
        </tr>
    </table>
</div>

<div id="footer">
    <div id="support-browser">対応ブラウザ:&nbsp;Chrome&nbsp;16&nbsp;以降,&nbsp;Firefox&nbsp;11&nbsp;以降,&nbsp;Safari&nbsp;6&nbsp;以降,&nbsp;IE&nbsp;10&nbsp;以降</div>
    <div id="twitter">
        <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://tkmax.github.io/tkmonline" data-text="TkmOnline" data-lang="ja">ツイート</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>
</div>

<script>
    var ws = new WebSocket('wss://pure-dusk-5665.herokuapp.com');

    ws.onopen = function () {
        ws.send(String.fromCharCode(100));

        setInterval(
                function () {
                    ws.send(String.fromCharCode(100));
                }, 5000
        );
    }

    ws.onmessage = function (e) {
        var args = e.data.substring(1).split(' ');

        var i;
        for (i = 0; i <= 24; i++) {
            var roomDiv = document.getElementById('room' + i).getElementsByTagName('div');
            roomDiv[1].textContent = args[i * 3];

            if (roomDiv[1].textContent === '0') {
                roomDiv[1].style.backgroundColor = 'gray';
            } else {
                roomDiv[1].style.backgroundColor = 'deeppink';
            }

            switch (args[i * 3 + 1]) {
                case 'a':
                    if (args[i * 3 + 2] === 'p') {
                        roomDiv[2].className = 'acquiso-playing';
                    } else {
                        roomDiv[2].className = 'acquiso-ready';
                    }
                    break;
                case 'b':
                    if (args[i * 3 + 2] === 'p') {
                        roomDiv[2].className = 'battleraiso-playing';
                    } else {
                        roomDiv[2].className = 'battleraiso-ready';
                    }
                    break;
                case 'c':
                    if (args[i * 3 + 2] === 'p') {
                        roomDiv[2].className = 'cataso-playing';
                    } else {
                        roomDiv[2].className = 'cataso-ready';
                    }
                    break;
                case 'g':
                    if (args[i * 3 + 2] === 'p') {
                        roomDiv[2].className = 'goipai-playing';
                    } else {
                        roomDiv[2].className = 'goipai-ready';
                    }
                    break;
            }
        }
    }
</script>
</body>
</html>
